name: Zeabur 终极 ID 探测器 (v1.7.1)
on: workflow_dispatch
jobs:
  check-ids:
    runs-on: ubuntu-latest
    steps:
      - name: 强制列出所有 ID
        env:
          ZEABUR_TOKEN: ${{ secrets.ZEABUR_TOKEN }}
        run: |
          # 使用最原始的 Relay 结构查询
          QUERY='query { projects { edges { node { name _id environments { _id name } services { _id name } } } } }'
          
          curl -s --request POST --url https://api.zeabur.com/graphql \
            --header "Authorization: Bearer $ZEABUR_TOKEN" \
            --header "Content-Type: application/json" \
            --data "$(jq -n --arg q "$QUERY" '{"query": $q}')" | jq .
